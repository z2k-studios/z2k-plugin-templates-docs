/* ==========================================================
   Z2K tweaks
   ========================================================== */
/* Custom CSS modifications for Z2K Studios */

/* Canary.                                                    */
/* ---------------------------------------------------------- */
/* Uncomment this "brutal canary" to force a visible notice   */
/* to have confidence in the CSS loading                      */
/* body::after { content: "NOTICE -- custom.css loaded"; position: fixed; inset: auto 1rem 1rem auto; font: 100px/1 monospace; background: #000; color: #fff; padding: 2px 4px; z-index: 99999; } */


/* Sidebar Styling                                            */
/* ---------------------------------------------------------- */
/* Create more space for the metacategories. Only affect the docs sidebar column */
/* Only the docs sidebar */
.theme-doc-sidebar-menu .z2k-sidebar-metacategory {
  padding-top: 2rem; /* adjust to taste */
  padding-left: 0.5rem; /* adjust to taste */
  padding-bottom: 0.25rem; /* space above the line */
  position: relative;       /* for the ::after anchor */
}
.theme-doc-sidebar-menu .z2k-sidebar-metacategory::after {
  content: "";
  display: block;
  height: 1px;
  background: var(--ifm-color-emphasis-300); /* adapts to theme */
  margin-top: 0.25rem;  /* space below text before the line */
}

[data-theme="dark"] .theme-doc-sidebar-menu .z2k-sidebar-metacategory::after,
[data-theme="dark"] .theme-doc-sidebar-menu .z2k-sidebar-metacategory > b {
  border-color: var(--ifm-color-emphasis-200);
  background: var(--ifm-color-emphasis-200);
}

/* Optional: don't pad the very first one as much */
.theme-doc-sidebar-menu .z2k-sidebar-metacategory:first-child {
  padding-top: 1rem;
  padding-left: 0.5rem; /* adjust to taste */
}

/* ==========================================================
   Code Block Handlebars Styling (unified variables; no visual change)
   ========================================================== */

/* Make the comment fields not be italicized */
.token.handlebars.hb-field.comment { font-style: normal; }

/* Ensure .token.handlebars.hb-field behaves like a single inline fragment */
.token.handlebars.hb-field { box-decoration-break: clone; }

/* ----------------------------------------------------------
   Theme tokens
   - Single semantic variable per concept.
   - Light values in :root; dark overrides under [data-theme='dark'].
   - Component rules below reference only these tokens.
   ---------------------------------------------------------- */
/* ----------------------------------------------------------
   Knobs: 
   - z2k-hb-pill-bg: background of entire field pill
   - z2k-hb-pill-border: color of pill border
   - z2k-hb-delim: color of delimiters {{ and }} and punctuation (|, ., etc)
   - z2k-hb-var: color of variables inside the field
   These can be adjusted in :root and overridden in the dark theme block.
   ---------------------------------------------------------- */

:root {
  --z2k-hb-pill-bg:     #e4e5e7;                 /* light: pill background */
  --z2k-hb-pill-border: rgba(0,0,0,0.08);        /* light: pill border */
  --z2k-hb-delim:       #2f302c;                 /* light: delimiters {{ }}, punctuation */
  --z2k-hb-var:         var(--ifm-color-success-darkest, #007300); /* light: variables */
}

html[data-theme='dark'] {
  --z2k-hb-pill-bg:     #2f3337;                 /* dark: pill background (matches prior) */
  --z2k-hb-pill-border: rgba(255,255,255,0.08);  /* dark: pill border (matches prior) */
  --z2k-hb-delim:       #e0e2e4;                 /* dark: delimiters */
  --z2k-hb-var:         #7fd8d5;                 /* dark: variables */
}

/* ----------------------------------------------------------
   Pill: subtle bg behind all parts of a {{…}} field
   ---------------------------------------------------------- */
.token.hb-field {
  background: var(--z2k-hb-pill-bg);
  display: inline-block;                       /* middle tokens won’t add their own side padding */
  border-radius: 6px;
  line-height: 1.35;
  box-decoration-break: clone;
  margin-top: 2px;                             /* prevents stacked lines from fusing */
  margin-bottom: 2px;
  padding-block: 0.12em;                       /* adds height without bleeding into next line */
  word-spacing: 0;                             /* guard against theme spacing */

  /* thin outline */
  border: 1px solid var(--z2k-hb-pill-border);
  /* keep the border inside the pill shape */
  box-sizing: border-box;
}

/* ----------------------------------------------------------
   Pill: Run edges add horizontal padding; middles stay tight
   ---------------------------------------------------------- */

/* First in Run: */
.token.hb-field:not(.hb-field + .hb-field) {
  padding-left: 0.22em;
}

/* Last in Run: */
.token.hb-field:not(:has(+ .hb-field)) {
  padding-right: 0.22em;
}

/* If a token directly follows another hb-field, drop its left border (prevent double seam) */
.token.hb-field + .token.hb-field {             /* middle/last (not first) */
  margin-left: -0.06em;                         /* closes inner seam */
  padding-left: 0;                              /* no inner left padding */
  border-left: none;
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
}

/* If a token has a following hb-field, drop its right border (prevents double seam) */
.token.hb-field:has(+ .hb-field) {              /* middle/first (not last) */
  padding-right: 0;                             /* no inner right padding */
  border-right: none;
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
}

/* ----------------------------------------------------------
   Delimiters & punctuation coloring (uses tokens)
   ---------------------------------------------------------- */
.token.hb-field.delimiter,
.token.hb-field.punctuation { color: var(--z2k-hb-delim); }
html[data-theme='dark'] .token.hb-field.delimiter,
html[data-theme='dark'] .token.hb-field.punctuation { color: var(--z2k-hb-delim); } /* explicit mirror; redundant but harmless */

/* ----------------------------------------------------------
   Delimiter internal spacing
   Opening delimiter (e.g. "{{") is usually followed by a field token -> add right padding.
   Closing delimiter (e.g. "}}") is usually NOT followed by a field token -> add left padding.
   ---------------------------------------------------------- */
.token.hb-field.delimiter:has(+ .token.hb-field) {
  padding-right: 0.22em;
}
.token.hb-field.delimiter:not(:has(+ .token.hb-field)) {
  padding-left: 0.22em;
}

/* Mirror for dark theme (keeps spacing consistent across themes) */
html[data-theme='dark'] .token.hb-field.delimiter:has(+ .token.hb-field) {
  padding-right: 0.22em;
}
html[data-theme='dark'] .token.hb-field.delimiter:not(:has(+ .token.hb-field)) {
  padding-left: 0.22em;
}

/* ----------------------------------------------------------
   Variables color (override Prism’s default)
   ---------------------------------------------------------- */
.token.handlebars.hb-field.variable,
.token.hb-field.variable { color: var(--z2k-hb-var) !important; }



/* ==========================================================
   Insert a special "internal link" icon after sidebar links
   ========================================================== */

/* ==========================================================
   Z2K: Sidebar placeholder HTML entries → trailing icon
   Uses Docusaurus' built-in external-link glyph for now
   (via the --ifm-link-external-icon data-URL mask).
   This mirrors how Docusaurus renders external link icons,
   without altering default visuals elsewhere.
   ========================================================== */
/* Z2K: add trailing external-link-style icon to special HTML sidebar items */
.theme-doc-sidebar-menu li.z2k-sidebar-placeholder-refhtml > a.menu__link.sidebar-refhtml::after {
  /* Default works with the original Docusaurus external link icon */
  /*
  content: "";
  display: inline-block;
  width: 0.9em;
  height: 0.9em;
  margin-left: 0.35em;
  vertical-align: -0.12em;
  */

  content: "";
  display: inline-block;
  width: 1em;          /* small bump so the enclosed arrow reads clearly */
  height: 1em;
  margin-left: 0.35em;
  vertical-align: -0.12em;

  /* Tint via text color */
  background-color: currentColor;

  /* Inline SVG as a mask (black path → visible) */
  /* Using same icon as Docusaurus for consistency */
  /* -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">path fill="black" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg>'); */
  /* mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="black" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg>'); */ 

  /* Custom SVG: box with right-pointing arrow inside */
  -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="black" fill-rule="evenodd" d="M3 4h18v16H3V4zm2 2v12h14V6H5z"/><rect x="8" y="11" width="6" height="2" fill="black"/><polygon points="14,9 18,12 14,15" fill="black"/></svg>');
  mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="black" fill-rule="evenodd" d="M3 4h18v16H3V4zm2 2v12h14V6H5z"/><rect x="8" y="11" width="6" height="2" fill="black"/><polygon points="14,9 18,12 14,15" fill="black"/></svg>');

  -webkit-mask-size: contain;
  mask-size: contain;
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-position: center;
  mask-position: center;
}

/* Optional: hover nudge to match Docusaurus feel */
.theme-doc-sidebar-menu li.z2k-sidebar-placeholder-refhtml > a.menu__link:hover::after {
  transform: translateY(-0.5px);
}

/* Optional: if your dark theme’s link color is faint, lift the opacity */
/* html[data-theme='dark'] .z2k-sidebar-placeholder-refhtml > a.menu__link::after {
  opacity: 1;
}
*/

.theme-doc-sidebar-menu li.z2k-sidebar-placeholder-refheader > a.menu__link.sidebar-refheader::after {
  content: "";
  display: inline-block;
  width: 1em;          /* small bump so the enclosed arrow reads clearly */
  height: 1em;
  margin-left: 0.35em;
  vertical-align: -0.12em;

  /* Tint via text color */
  background-color: currentColor;

}

/* Optional: hover nudge to match Docusaurus feel */
.theme-doc-sidebar-menu li.z2k-sidebar-placeholder-refheader > a.menu__link:hover::after {
  transform: translateY(-0.5px);
}


/* ==========================================================
   Make H2 Headings Slightly More Compact
   ========================================================== */

/* Tighten H2 without changing families */
.theme-doc-markdown h2,
.markdown h2 {
  letter-spacing: normal;              /* explicit, though default. If you want it tighter try "-0.005em;"  ~–0.5%: usually enough */
  font-kerning: normal;                /* use kerning tables */
  font-variant-ligatures: common-ligatures contextual;
  text-rendering: optimizeLegibility;  /* fine to keep */
  font-weight: 600;                    /* SF 600 feels less “puffy” than 700 */
  line-height: 1.25;                   /* keep headings compact */
}

/* Slightly smaller size reduces the “airiness” perception */
:root {
  --ifm-h2-font-size: 1.75rem; /* ~28px if base is 16px; was ~32px on your page */
}


/* ==========================================================
   Compact Docs Sidebar (Notion-ish)
   ========================================================== */

/* Base: slightly smaller type and tighter rhythm */
:root {
  --ifm-font-size-base: 15px;                /* default is 16px */
  --ifm-menu-link-padding-vertical: 4px;     /* default ~8px */
  --ifm-menu-link-padding-horizontal: 8px;   /* default ~12px */
}

/* Menu links & active/hover states */
.theme-doc-sidebar-menu .menu__link {
  font-size: 0.95rem;        /* ~14.25px with base 15px */
  line-height: 1.2;          /* tighter than default */
  padding: var(--ifm-menu-link-padding-vertical)
           var(--ifm-menu-link-padding-horizontal);
  border-radius: 6px;        /* softer, Notion-esque */
}
.theme-doc-sidebar-menu .menu__link:hover {
  background: var(--ifm-hover-overlay);
}
.theme-doc-sidebar-menu .menu__link--active,
.theme-doc-sidebar-menu .menu__link--active:hover {
  background: rgba(0,0,0,0.04);              /* subtle active bg (auto in dark via var) */
}

/* Category labels (the clickable parent rows) */
.theme-doc-sidebar-menu .menu__list-item-collapsible > .menu__link {
  font-weight: 600;          /* slight weight like Notion’s section headers */
}

/* Indentation: shallower nesting */
.theme-doc-sidebar-menu .menu__list .menu__list {
  margin-left: 10px;         /* default is larger; this feels “Notion tight” */
}


/* Reduce vertical gaps between list items/categories */
.theme-doc-sidebar-menu .menu__list-item {
  margin: 2px 0;             /* default ~4–6px */
}

/* Optional: dim bullets/icons to emphasize text */
.theme-doc-sidebar-menu .menu__link .menu__link--sublist-caret,
.theme-doc-sidebar-menu .menu__link svg {
  opacity: 0.7;
}

/* Mobile sidebar parity (keeps density consistent when the navbar drawer is open) */
.navbar-sidebar .menu__link {
  font-size: 0.95rem;
  line-height: 1.2;
  padding: 6px 10px;
}


/* ==========================================================
   Soften and Shrink Sidebar Carets
   ========================================================== */
   
/* Chevron carets: smaller & more discreet */
/* 1) Button caret variant */
.theme-doc-sidebar-menu .menu__caret {
  transform: scale(0.85);
  margin-right: 6px;
  opacity: 0.7;
  transition: opacity .15s ease;
}
.theme-doc-sidebar-menu .menu__caret:hover { opacity: 1; }

/* 2) Link pseudo-caret variant */
.theme-doc-sidebar-menu .menu__link--sublist-caret::after {
  /* ensure the pseudo-element has box to scale */
  width: 1rem;
  height: 1rem;
  background-size: 1rem 1rem;        /* shrink icon consistently */
  opacity: 0.7;
  transform: scale(0.85) rotate(0deg);
  transform-origin: center;
  margin-left: 6px;                   /* mirrors the button’s margin-right */
  transition: opacity .15s ease, transform .15s ease;
  /* Docusaurus already sets content/background-image; no need to redefine */
}
.theme-doc-sidebar-menu .menu__link--sublist-caret:hover::after { opacity: 1; }

/* keep rotation behavior when expanded */
.theme-doc-sidebar-menu .menu__link--sublist-caret[aria-expanded="true"]::after {
  transform: scale(0.85) rotate(90deg);
}


/* ==========================================================
   H2 Spacing - gives more white space above each H2 Heading
   ========================================================== */


/* Tune these to taste */
:root {
  --h2-space-multiplier-top: 2;       /* ≈ two H2 line-heights above */
  --h2-space-multiplier-bottom: 0.75; /* ≈ three-quarters line-height below */
}

/* Use existing Infima variables when present */
:root {
  /* If you've set --ifm-line-height-h2 elsewhere, this will follow it */
  --_h2-lh: var(--ifm-line-height-h2, 1.25); /* fallback = 1.25 */
}

/* Scope to docs markdown so blog/home/etc. are unaffected */
.theme-doc-markdown h2 {
  /* Core spacing: use em so it scales with the H2 size itself */
  margin-block-start: calc(var(--h2-space-multiplier-top) * var(--_h2-lh) * 1em);
  margin-block-end: calc(var(--h2-space-multiplier-bottom) * var(--_h2-lh) * 1em);

  /* Keep anchor scrolling sane with a sticky navbar present. If your navbar height differs, adjust 68px. */
  scroll-margin-top: clamp(68px, 5vh, 96px);
}

/* Optional: defeat margin-collapsing with preceding blocks (lists, images).
   This pseudo-element creates non-collapsing space “before” the H2 without affecting layout elsewhere. */
.theme-doc-markdown h2::before {
  content: "";
  display: block;
  height: calc((var(--h2-space-multiplier-top) - 1) * var(--_h2-lh) * 1em);
  /* Pull the H2 back up so visual top stays the same; anchors still align nicely. */
  margin-top: calc(-1 * (var(--h2-space-multiplier-top) - 1) * var(--_h2-lh) * 1em);
}


/* ==========================================================
   Highlighted Text Styling
   - applies to <mark> and .z2k-mark
   ========================================================== */

:root {
  --z2k-hl-bg: #fff3a3;             /* light, readable */
  --z2k-hl-fg: inherit;
  --z2k-hl-py: 0.06em;
  --z2k-hl-px: 0.18em;
  --z2k-hl-radius: 3px;
}

html[data-theme='dark'] {
  --z2k-hl-bg: #5a4a00;             /* subdued amber for dark */
}

.z2k-mark, mark {
  background: var(--z2k-hl-bg);
  color: var(--z2k-hl-fg);
  padding: var(--z2k-hl-py) var(--z2k-hl-px);
  border-radius: var(--z2k-hl-radius);
  box-decoration-break: clone;      /* keep padding across wrapped lines */
}

/* ==========================================================
   keywords in the sidebar Text Styling
   - applies .z2k-code
   - mimics <code> (i.e. fixed spaced fonts) but with slight tweaks for sidebar 
   ========================================================== */
li.z2k-code  > a.menu__link {
  font-family: var(--ifm-font-family-monospace);
  font-size: var(--ifm-code-font-size, 0.80rem);
  letter-spacing: -0.02em;  /* mild width reduction without layout shift */
}



/* ==========================================================
   Support the REF_HTML sidebar link type
   ========================================================== */

/* If Docusaurus ever tries to set an active class/aria on the anchor, neutralize it */
.menu__link.sidebar-refhtml[aria-current],
.menu__link.sidebar-refhtml.menu__link--active {
  background: transparent;
  color: inherit;
  font-weight: normal;
  text-decoration: none;
}



/* ==========================================================
   Overall Docs Sidebar Layout Tweaks :: MORE WHITESPACE!
   - narrower sidebar
   - more breathing room between sidebar and content
   - minimum content width
   ========================================================== */

/* 1) Make the left docs sidebar narrower (fixed width, independent of longest item) */
:root {
  /* Docusaurus default is ~300px. Try 240–260px; adjust to taste. */
  --doc-sidebar-width: 260px;
  --doc-sidebar-hidden-width: 32px; /* width when collapsed (optional) */
}

/* Allow long item text to wrap instead of forcing the column wider */
.theme-doc-sidebar-menu .menu__link { white-space: normal; }

/* 2) Add breathing room between the sidebar and the document content */
@media (min-width: 997px) {
  /* Add a subtle divider + padding on the sidebar’s right edge */
  .theme-doc-sidebar-container {
    padding-right: 0.75rem;
    border-right: 1px solid var(--ifm-color-emphasis-200);
  }

  /* Keep the sidebar column fixed; let content take the rest */
  .row > [class*="docSidebarContainer"] {
    flex: 0 0 var(--doc-sidebar-width);
    max-width: var(--doc-sidebar-width);
  }

  /* 3) Ensure the main document column never gets too skinny */
  .row > [class*="docItemCol"] {
    min-width: 760px;        /* pick your minimum (e.g., 680–820px) */
    flex: 1 1 auto;          /* content grows/shrinks as space allows */
  }
}

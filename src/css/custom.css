/* ==========================================================
   Z2K tweaks
   ========================================================== */
/* Custom CSS modifications for Z2K Studios */

/* Canary.                                                    */
/* ---------------------------------------------------------- */
/* Uncomment this "brutal canary" to force a visible notice   */
/* to have confidence in the CSS loading                      */
/* body::after { content: "NOTICE -- custom.css loaded"; position: fixed; inset: auto 1rem 1rem auto; font: 100px/1 monospace; background: #000; color: #fff; padding: 2px 4px; z-index: 99999; } */


/* Sidebar Styling                                            */
/* ---------------------------------------------------------- */
/* Create more space for the metacategories. Only affect the docs sidebar column */
/* Only the docs sidebar */
.theme-doc-sidebar-menu .z2k-sidebar-metacategory {
  padding-top: 2rem; /* adjust to taste */
  padding-left: 0.5rem; /* adjust to taste */
  padding-bottom: 0.25rem; /* space above the line */
  position: relative;       /* for the ::after anchor */
}
.theme-doc-sidebar-menu .z2k-sidebar-metacategory::after {
  content: "";
  display: block;
  height: 1px;
  background: var(--ifm-color-emphasis-300); /* adapts to theme */
  margin-top: 0.25rem;  /* space below text before the line */
}

[data-theme="dark"] .theme-doc-sidebar-menu .z2k-sidebar-metacategory::after,
[data-theme="dark"] .theme-doc-sidebar-menu .z2k-sidebar-metacategory > b {
  border-color: var(--ifm-color-emphasis-200);
  background: var(--ifm-color-emphasis-200);
}

/* Optional: don't pad the very first one as much */
.theme-doc-sidebar-menu .z2k-sidebar-metacategory:first-child {
  padding-top: 1rem;
  padding-left: 0.5rem; /* adjust to taste */
}

/* ==========================================================
   Code Block Handlebars Styling (unified variables; no visual change)
   ========================================================== */

/* Make the comment fields not be italicized */
.token.handlebars.hb-field.comment { font-style: normal; }

/* Ensure .token.handlebars.hb-field behaves like a single inline fragment */
.token.handlebars.hb-field { box-decoration-break: clone; }

/* ----------------------------------------------------------
   Theme tokens
   - Single semantic variable per concept.
   - Light values in :root; dark overrides under [data-theme='dark'].
   - Component rules below reference only these tokens.
   ---------------------------------------------------------- */
/* ----------------------------------------------------------
   Knobs: 
   - z2k-hb-pill-bg: background of entire field pill
   - z2k-hb-pill-border: color of pill border
   - z2k-hb-delim: color of delimiters {{ and }} and punctuation (|, ., etc)
   - z2k-hb-var: color of variables inside the field
   These can be adjusted in :root and overridden in the dark theme block.
   ---------------------------------------------------------- */

:root {
  --z2k-hb-pill-bg:     #e4e5e7;                 /* light: pill background */
  --z2k-hb-pill-border: rgba(0,0,0,0.08);        /* light: pill border */
  --z2k-hb-delim:       #2f302c;                 /* light: delimiters {{ }}, punctuation */
  --z2k-hb-var:         var(--ifm-color-success-darkest, #007300); /* light: variables */
}

html[data-theme='dark'] {
  --z2k-hb-pill-bg:     #2f3337;                 /* dark: pill background (matches prior) */
  --z2k-hb-pill-border: rgba(255,255,255,0.08);  /* dark: pill border (matches prior) */
  --z2k-hb-delim:       #e0e2e4;                 /* dark: delimiters */
  --z2k-hb-var:         #7fd8d5;                 /* dark: variables */
}

/* ----------------------------------------------------------
   Pill: subtle bg behind all parts of a {{…}} field
   ---------------------------------------------------------- */
.token.hb-field {
  background: var(--z2k-hb-pill-bg);
  display: inline-block;                       /* middle tokens won’t add their own side padding */
  border-radius: 6px;
  line-height: 1.35;
  box-decoration-break: clone;
  margin-top: 2px;                             /* prevents stacked lines from fusing */
  margin-bottom: 2px;
  padding-block: 0.12em;                       /* adds height without bleeding into next line */
  word-spacing: 0;                             /* guard against theme spacing */

  /* thin outline */
  border: 1px solid var(--z2k-hb-pill-border);
  /* keep the border inside the pill shape */
  box-sizing: border-box;
}

/* ----------------------------------------------------------
   Pill: Run edges add horizontal padding; middles stay tight
   ---------------------------------------------------------- */

/* First in Run: */
.token.hb-field:not(.hb-field + .hb-field) {
  padding-left: 0.22em;
}

/* Last in Run: */
.token.hb-field:not(:has(+ .hb-field)) {
  padding-right: 0.22em;
}

/* If a token directly follows another hb-field, drop its left border (prevent double seam) */
.token.hb-field + .token.hb-field {             /* middle/last (not first) */
  margin-left: -0.06em;                         /* closes inner seam */
  padding-left: 0;                              /* no inner left padding */
  border-left: none;
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
}

/* If a token has a following hb-field, drop its right border (prevents double seam) */
.token.hb-field:has(+ .hb-field) {              /* middle/first (not last) */
  padding-right: 0;                             /* no inner right padding */
  border-right: none;
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
}

/* ----------------------------------------------------------
   Delimiters & punctuation coloring (uses tokens)
   ---------------------------------------------------------- */
.token.hb-field.delimiter,
.token.hb-field.punctuation { color: var(--z2k-hb-delim); }
html[data-theme='dark'] .token.hb-field.delimiter,
html[data-theme='dark'] .token.hb-field.punctuation { color: var(--z2k-hb-delim); } /* explicit mirror; redundant but harmless */

/* ----------------------------------------------------------
   Delimiter internal spacing
   Opening delimiter (e.g. "{{") is usually followed by a field token -> add right padding.
   Closing delimiter (e.g. "}}") is usually NOT followed by a field token -> add left padding.
   ---------------------------------------------------------- */
.token.hb-field.delimiter:has(+ .token.hb-field) {
  padding-right: 0.22em;
}
.token.hb-field.delimiter:not(:has(+ .token.hb-field)) {
  padding-left: 0.22em;
}

/* Mirror for dark theme (keeps spacing consistent across themes) */
html[data-theme='dark'] .token.hb-field.delimiter:has(+ .token.hb-field) {
  padding-right: 0.22em;
}
html[data-theme='dark'] .token.hb-field.delimiter:not(:has(+ .token.hb-field)) {
  padding-left: 0.22em;
}

/* ----------------------------------------------------------
   Variables color (override Prism’s default)
   ---------------------------------------------------------- */
.token.handlebars.hb-field.variable,
.token.hb-field.variable { color: var(--z2k-hb-var) !important; }



/* ==========================================================
   Insert a special "internal link" icon after sidebar links
   ========================================================== */

/* Attach icon after the link label for any item carrying your hook class */
.z2k-sidebar-placeholder-ref > a.menu__link::after {
  content: "";
  display: inline-block;
  width: 0.9em;            /* tune to your sidebar scale */
  height: 0.9em;
  margin-left: 0.35em;
  vertical-align: text-bottom;
  background-repeat: no-repeat;
  background-position: center;
  background-size: contain;
  opacity: 0.95;           /* optional: subtle softening */
  /* --- Icon #1: arrow stays inside the box (unencoded UTF-8) --- */
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 10v10h10" fill="none" stroke="currentColor" stroke-width="1.9" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 12l6-6" fill="none" stroke="currentColor" stroke-width="1.9" stroke-linecap="round" stroke-linejoin="round"/><path d="M14 6h4v4" fill="none" stroke="currentColor" stroke-width="1.9" stroke-linecap="round" stroke-linejoin="round"/></svg>');
  /* --- Icon #2: arrow to target dot (unencoded UTF-8) --- */
  /* background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 10v10h10" fill="none" stroke="currentColor" stroke-width="1.9" stroke-linecap="round" stroke-linejoin="round"/><circle cx="12" cy="12" r="1.6" fill="currentColor" stroke="none"/><path d="M14 6h4v4" fill="none" stroke="currentColor" stroke-width="1.9" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 12l6-6" fill="none" stroke="currentColor" stroke-width="1.9" stroke-linecap="round" stroke-linejoin="round"/></svg>'); */
}

/* Optional: if your dark theme’s link color is faint, lift the opacity */
html[data-theme='dark'] .z2k-sidebar-placeholder-ref > a.menu__link::after {
  opacity: 1;
}


/* ==========================================================
   Make H2 Headings Slightly More Compact
   ========================================================== */

/* Tighten H2 without changing families */
.theme-doc-markdown h2,
.markdown h2 {
  letter-spacing: normal;              /* explicit, though default. If you want it tighter try "-0.005em;"  ~–0.5%: usually enough */
  font-kerning: normal;                /* use kerning tables */
  font-variant-ligatures: common-ligatures contextual;
  text-rendering: optimizeLegibility;  /* fine to keep */
  font-weight: 600;                    /* SF 600 feels less “puffy” than 700 */
  line-height: 1.25;                   /* keep headings compact */
}

/* Slightly smaller size reduces the “airiness” perception */
:root {
  --ifm-h2-font-size: 1.75rem; /* ~28px if base is 16px; was ~32px on your page */
}


/* ==========================================================
   Compact Docs Sidebar (Notion-ish)
   ========================================================== */

/* Base: slightly smaller type and tighter rhythm */
:root {
  --ifm-font-size-base: 15px;                /* default is 16px */
  --ifm-menu-link-padding-vertical: 4px;     /* default ~8px */
  --ifm-menu-link-padding-horizontal: 8px;   /* default ~12px */
}

/* Menu links & active/hover states */
.theme-doc-sidebar-menu .menu__link {
  font-size: 0.95rem;        /* ~14.25px with base 15px */
  line-height: 1.2;          /* tighter than default */
  padding: var(--ifm-menu-link-padding-vertical)
           var(--ifm-menu-link-padding-horizontal);
  border-radius: 6px;        /* softer, Notion-esque */
}
.theme-doc-sidebar-menu .menu__link:hover {
  background: var(--ifm-hover-overlay);
}
.theme-doc-sidebar-menu .menu__link--active,
.theme-doc-sidebar-menu .menu__link--active:hover {
  background: rgba(0,0,0,0.04);              /* subtle active bg (auto in dark via var) */
}

/* Category labels (the clickable parent rows) */
.theme-doc-sidebar-menu .menu__list-item-collapsible > .menu__link {
  font-weight: 600;          /* slight weight like Notion’s section headers */
}

/* Indentation: shallower nesting */
.theme-doc-sidebar-menu .menu__list .menu__list {
  margin-left: 10px;         /* default is larger; this feels “Notion tight” */
}

/* Chevron carets: smaller & more discreet */
.theme-doc-sidebar-menu .menu__caret {
  transform: scale(0.85);
  margin-right: 6px;         /* pull text left a bit */
  opacity: 0.7;
}
.theme-doc-sidebar-menu .menu__caret:hover { opacity: 1; }

/* Reduce vertical gaps between list items/categories */
.theme-doc-sidebar-menu .menu__list-item {
  margin: 2px 0;             /* default ~4–6px */
}

/* Optional: dim bullets/icons to emphasize text */
.theme-doc-sidebar-menu .menu__link .menu__link--sublist-caret,
.theme-doc-sidebar-menu .menu__link svg {
  opacity: 0.7;
}

/* Mobile sidebar parity (keeps density consistent when the navbar drawer is open) */
.navbar-sidebar .menu__link {
  font-size: 0.95rem;
  line-height: 1.2;
  padding: 6px 10px;
}



/* ==========================================================
   H2 Spacing - gives more white space above each H2 Heading
   ========================================================== */


/* Tune these to taste */
:root {
  --h2-space-multiplier-top: 2;       /* ≈ two H2 line-heights above */
  --h2-space-multiplier-bottom: 0.75; /* ≈ three-quarters line-height below */
}

/* Use existing Infima variables when present */
:root {
  /* If you've set --ifm-line-height-h2 elsewhere, this will follow it */
  --_h2-lh: var(--ifm-line-height-h2, 1.25); /* fallback = 1.25 */
}

/* Scope to docs markdown so blog/home/etc. are unaffected */
.theme-doc-markdown h2 {
  /* Core spacing: use em so it scales with the H2 size itself */
  margin-block-start: calc(var(--h2-space-multiplier-top) * var(--_h2-lh) * 1em);
  margin-block-end: calc(var(--h2-space-multiplier-bottom) * var(--_h2-lh) * 1em);

  /* Keep anchor scrolling sane with a sticky navbar present. If your navbar height differs, adjust 68px. */
  scroll-margin-top: clamp(68px, 5vh, 96px);
}

/* Optional: defeat margin-collapsing with preceding blocks (lists, images).
   This pseudo-element creates non-collapsing space “before” the H2 without affecting layout elsewhere. */
.theme-doc-markdown h2::before {
  content: "";
  display: block;
  height: calc((var(--h2-space-multiplier-top) - 1) * var(--_h2-lh) * 1em);
  /* Pull the H2 back up so visual top stays the same; anchors still align nicely. */
  margin-top: calc(-1 * (var(--h2-space-multiplier-top) - 1) * var(--_h2-lh) * 1em);
}


/* ==========================================================
   Highlighted Text Styling
   - applies to <mark> and .z2k-mark
   ========================================================== */

:root {
  --z2k-hl-bg: #fff3a3;             /* light, readable */
  --z2k-hl-fg: inherit;
  --z2k-hl-py: 0.06em;
  --z2k-hl-px: 0.18em;
  --z2k-hl-radius: 3px;
}

html[data-theme='dark'] {
  --z2k-hl-bg: #5a4a00;             /* subdued amber for dark */
}

.z2k-mark, mark {
  background: var(--z2k-hl-bg);
  color: var(--z2k-hl-fg);
  padding: var(--z2k-hl-py) var(--z2k-hl-px);
  border-radius: var(--z2k-hl-radius);
  box-decoration-break: clone;      /* keep padding across wrapped lines */
}
"use strict";(globalThis.webpackChunkz2k_plugin_templates_docs=globalThis.webpackChunkz2k_plugin_templates_docs||[]).push([[2346],{2015:(e,t,l)=>{l.r(t),l.d(t,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"reference-manual/block-templates/block-templates","title":"Block Templates","description":"The Z2K Template Plugin supports the concept of \\"Partial Templates\\", or also just called \\"Partials\\". These special templates are intended to be block level template text that can be inserted inside of another file.","source":"@site/docs/reference-manual/block-templates/block-templates.md","sourceDirName":"reference-manual/block-templates","slug":"/reference-manual/block-templates/block-templates","permalink":"/z2k-plugin-templates-docs/docs/reference-manual/block-templates/block-templates","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"sidebar_folder_position":140,"aliases":["Partials","Partial Templates","Block Template"],"title":"Block Templates","slug":"block-templates"},"sidebar":"Reference Manual","previous":{"title":"Handlebars Support","permalink":"/z2k-plugin-templates-docs/docs/reference-manual/handlebars-support/handlebars-support"},"next":{"title":"Settings Page","permalink":"/z2k-plugin-templates-docs/docs/reference-manual/settings-page/settings-page"}}');var s=l(4848),i=l(8453);const r={sidebar_position:1,sidebar_folder_position:140,aliases:["Partials","Partial Templates","Block Template"],title:"Block Templates",slug:"block-templates"},a=void 0,o={},d=[{value:"What Is a Block Template?",id:"what-is-a-block-template",level:2},{value:"Example Block Template",id:"example-block-template",level:3},{value:"How the Plugin Identifies a Block Template",id:"how-the-plugin-identifies-a-block-template",level:2},{value:"1. <strong>YAML override</strong>",id:"1-yaml-override",level:3},{value:"2. <strong>Convert-to-block command</strong>",id:"2-convert-to-block-command",level:3},{value:"3. <strong>Folder placement (experimental but supported)</strong>",id:"3-folder-placement-experimental-but-supported",level:3},{value:"4. <strong>Everything else is not a block template</strong>",id:"4-everything-else-is-not-a-block-template",level:3}];function c(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.p,{children:['The Z2K Template Plugin supports the concept of "',(0,s.jsx)(t.em,{children:"Partial Templates"}),'", or also just called "',(0,s.jsx)(t.em,{children:"Partials"}),'". These special templates are intended to be ',(0,s.jsx)(t.em,{children:"block level"})," template text that can be inserted inside of another file."]}),"\n",(0,s.jsx)(t.p,{children:"Partials are extremely useful for enforcing consistent naming and formatting of text blocks across multiple files."}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h1,{id:"block-templates-partials",children:"Block Templates (Partials)"}),"\n",(0,s.jsx)(t.h2,{id:"what-is-a-block-template",children:"What Is a Block Template?"}),"\n",(0,s.jsxs)(t.p,{children:["A ",(0,s.jsx)(t.strong,{children:"Block Template"})," is a reusable fragment of markdown. It is not used to create a new file. Instead it is:"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Inserted into an existing document"}),"\n",(0,s.jsx)(t.li,{children:"Turned into body content during Named Template rendering"}),"\n",(0,s.jsx)(t.li,{children:"Used to build modular, composable templates"}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"Block Templates are typically small, structured units such as:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"A checklist block"}),"\n",(0,s.jsx)(t.li,{children:"A project metadata block"}),"\n",(0,s.jsx)(t.li,{children:"A quote or highlight block"}),"\n",(0,s.jsx)(t.li,{children:"A standard header/footer snippet"}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"example-block-template",children:"Example Block Template"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-md",children:"## Task\n- [ ] {{taskName}}\n- Priority: {{priority}}\n"})}),"\n",(0,s.jsx)(t.p,{children:"Inserted via:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.em,{children:"Insert block template"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.em,{children:"Insert block template using selection"})}),"\n",(0,s.jsx)(t.li,{children:"Or inside another template:"}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"{{> tasks/task-block }}\n"})}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"how-the-plugin-identifies-a-block-template",children:"How the Plugin Identifies a Block Template"}),"\n",(0,s.jsx)(t.p,{children:"Z2K determines a block template using:"}),"\n",(0,s.jsxs)(t.h3,{id:"1-yaml-override",children:["1. ",(0,s.jsx)(t.strong,{children:"YAML override"})]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:"z2k_template_type: partial\n"})}),"\n",(0,s.jsx)(t.p,{children:"This is the highest-precedence signal."}),"\n",(0,s.jsxs)(t.h3,{id:"2-convert-to-block-command",children:["2. ",(0,s.jsx)(t.strong,{children:"Convert-to-block command"})]}),"\n",(0,s.jsx)(t.p,{children:"When you run:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.em,{children:"Convert file to block template"})}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"\u2026the plugin writes the appropriate YAML override."}),"\n",(0,s.jsxs)(t.h3,{id:"3-folder-placement-experimental-but-supported",children:["3. ",(0,s.jsx)(t.strong,{children:"Folder placement (experimental but supported)"})]}),"\n",(0,s.jsxs)(t.p,{children:["A file located in a card type's ",(0,s.jsx)(t.code,{children:"/Partials"})," or ",(0,s.jsx)(t.code,{children:"/Blocks"})," subfolder can optionally be treated as a partial depending on naming conventions. This behavior is less strict than named template resolution and may evolve further."]}),"\n",(0,s.jsxs)(t.h3,{id:"4-everything-else-is-not-a-block-template",children:["4. ",(0,s.jsx)(t.strong,{children:"Everything else is not a block template"})]}),"\n",(0,s.jsx)(t.p,{children:"If none of the above apply, it\u2019s a normal file (or possibly a Named Template if other rules match)."}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h1,{id:"system-block-templates",children:"System Block Templates"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"System Block Templates"})," are injected globally into templates before rendering."]}),"\n",(0,s.jsx)(t.p,{children:"Examples include:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Vault-wide header/footer blocks"}),"\n",(0,s.jsx)(t.li,{children:"Global metadata such as creator info or timestamps"}),"\n",(0,s.jsx)(t.li,{children:"Standard tags"}),"\n",(0,s.jsx)(t.li,{children:"Required fields"}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"They behave like invisible partials:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["They merge ",(0,s.jsx)(t.strong,{children:"before"})," template YAML"]}),"\n",(0,s.jsxs)(t.li,{children:["Their ",(0,s.jsx)(t.code,{children:"field-info"})," definitions can be overridden by template-level fields"]}),"\n",(0,s.jsx)(t.li,{children:"Their content is prepended to template bodies"}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"This allows an entire vault to maintain consistent structure without repeating boilerplate."}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h1,{id:"block-template-naming-conventions",children:"Block Template Naming Conventions"}),"\n",(0,s.jsxs)(t.p,{children:["Block Templates' filenames must be prefixed with the text \"",(0,s.jsx)(t.code,{children:"Partial - "}),"\".\nNote: this prefix can be changed inside the plugin's setting page."]}),"\n",(0,s.jsx)(t.h1,{id:"inserting-blocks",children:"Inserting Blocks"}),"\n",(0,s.jsx)(t.p,{children:"Blocks can be inserted into a file via two methods:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:'By using the "Insert Block Template into Card" command inside Obsidian. This can be done via an Obsidian Command request or by right clicking in the text of an existing card.'}),"\n",(0,s.jsxs)(t.li,{children:["By forcing a inclusion of the partial template's text using Handlebars' ",(0,s.jsx)(t.code,{children:"{{> partialTemplateFile.md}}"})," field."]}),"\n"]}),"\n",(0,s.jsx)(t.h1,{id:"yaml-data-and-partials",children:"YAML Data and Partials"}),"\n",(0,s.jsx)(t.p,{children:"The Z2K Templates Plugin attempts to be smart at how to handle YAML frontmatter found in the partial template file being inserted. If the partial contains yaml data, it will extract those entries and add them into the card's YAML frontmatter."}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.em,{children:"Note:"})," The plugin will not perform any error checking. For instance, if the YAML field is already present in the destination file's YAML, a duplicate entry may occur."]}),"\n",(0,s.jsx)(t.h1,{id:"advanced-field-functions",children:"Advanced Field Functions"}),"\n",(0,s.jsxs)(t.p,{children:["Block Templates support the full range of advance formatting and prompting features. Thus, you can use builtin functions and advanced Handlebars syntax within the partial template, assuming the underlying feature is supported (see ",(0,s.jsx)(t.a,{href:"/docs/reference-manual/handlebars-support/handlebars-support",children:"Handlebars Support"}),")"]}),"\n",(0,s.jsx)(t.h1,{id:"dev-notes",children:"Dev Notes:"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.em,{children:"TODO: Move to Design Notes folder - but first review what items to share with users."}),"\nCaptures all the partials using the same scope logic as the templates, registers them with handlebars."]}),"\n",(0,s.jsx)(t.p,{children:"Do blocks template ever need block templates from other directories besides the template scope logic?"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Likely, yes\nHow should partials be referenced when they are in parent directories?"}),"\n",(0,s.jsx)(t.li,{children:"Should be answered now\nPassing context - this won't be allowed because we're not allowing fields.with.dots, right?"}),"\n",(0,s.jsx)(t.li,{children:"Shouldn't worry about this right now\nDoes the prompt need to prompt for the fields in the partials?"}),"\n",(0,s.jsx)(t.li,{children:"Yes\nShould relative paths be relative to the template or relative to the new card location?"}),"\n",(0,s.jsx)(t.li,{children:"donno, just do relative to template"}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["When referencing block templates, use the name of the block template like this:\n",(0,s.jsx)(t.code,{children:"{{> block template}}"})]}),"\n",(0,s.jsx)(t.p,{children:"If there are multiple block templates with the same name, it will pick the one that is closest to the template, in this order:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"Same folder"}),"\n",(0,s.jsx)(t.li,{children:"Parent folder"}),"\n",(0,s.jsx)(t.li,{children:"Grandparent folder"}),"\n",(0,s.jsx)(t.li,{children:"..."}),"\n",(0,s.jsx)(t.li,{children:"Root folder"}),"\n",(0,s.jsx)(t.li,{children:"Child folder"}),"\n",(0,s.jsx)(t.li,{children:"Grandchild folder"}),"\n",(0,s.jsx)(t.li,{children:"..."}),"\n",(0,s.jsx)(t.li,{children:"Any sibling folder/cousin folder (undefined order)"}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["When using ",(0,s.jsx)(t.a,{href:"/docs/reference-manual/block-templates/block-templates",children:"Block Templates"}),", the extra templates folder name can optionally be omitted from the path. This means that, for example, ",(0,s.jsx)(t.code,{children:"/z2k/folderA/Templates/partial"})," can be referenced using ",(0,s.jsx)(t.code,{children:"folderA/Templates/partial"})," or ",(0,s.jsx)(t.code,{children:"folderA/partial"}),". In cases where this creates ambiguity, you must use the path with the Embedded Templates folder name, like ",(0,s.jsx)(t.code,{children:"folderA/Templates/partial"}),"."]}),"\n",(0,s.jsx)(t.p,{children:"Examples:"}),"\n",(0,s.jsxs)(t.p,{children:["When using External Templates:\nIf you're using:\n/External Templates/folderA/template\nThis is the order of precedence for  ",(0,s.jsx)(t.code,{children:"{{> partial}}"}),"\n/External Templates/folderA/partial\n/External Templates/partial\n/External Templates/folderA/folderB/partial\n/External Templates/folderC/partial"]}),"\n",(0,s.jsxs)(t.p,{children:["When using Embedded Templates:\nIf you're using:\n/z2k/folderA/Templates/template\nThis is the order of precedence for ",(0,s.jsx)(t.code,{children:"{{> partial}}"}),"\n/z2k/folderA/Templates/partial\n/z2k/folderA/Templates/folderD/partial\n/z2k/Templates/partial\n/z2k/Templates/folderE/partial\n/z2k/folderA/folderB/Templates/partial\n/z2k/folderC/Templates/partial"]}),"\n",(0,s.jsx)(t.p,{children:"Relative paths like ../partial are not supported at this time. Please submit a feature request if you would like this functionality."}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)("span",{class:"z2k-mark",children:"question"}),"\nCan you make a partial that is based on a field (eg use a multiselect to allow the user to choose a partial to import)"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.code,{children:'{{< (random "Foo.md" "Bar.md")}}'})}),"\n",(0,s.jsx)(t.h1,{id:"inserting-block-templates",children:"Inserting Block Templates"}),"\n",(0,s.jsx)(t.p,{children:"Peek under the covers:"}),"\n",(0,s.jsxs)(t.p,{children:["So when you run ",(0,s.jsx)(t.strong,{children:"Insert block template"})," inside Some/CardType/Note.md:"]}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["The plugin takes the note\u2019s folder Some/CardType as the ",(0,s.jsx)(t.strong,{children:"starting card type folder"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["It gathers ",(0,s.jsx)(t.strong,{children:"all partials"})," under the Templates Root Folder."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["It filters them to ",(0,s.jsx)(t.strong,{children:"partials associated with"}),":"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Some/CardType (directly or its Templates subfolder),"}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"then Some/ (directly or its Templates),"}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"then the Templates Root itself (and its Templates), stopping there."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"It sorts that combined list alphabetically by full path."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["It hands that sorted list to the ",(0,s.jsx)(t.strong,{children:"TemplateSelectionModal"}),", which is the picker you see."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"Result:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["You see ",(0,s.jsx)(t.strong,{children:"all block templates relevant to the current note\u2019s \u201ccard type\u201d"})," and its ancestor card types."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["You do ",(0,s.jsx)(t.strong,{children:"not"})," see every partial in the vault \u2013 only ones under the templates root and structurally associated with your current folder via direct membership or its Templates subfolder."]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,t,l)=>{l.d(t,{R:()=>r,x:()=>a});var n=l(6540);const s={},i=n.createContext(s);function r(e){const t=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);
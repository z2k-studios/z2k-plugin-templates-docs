"use strict";(self.webpackChunkz2k_plugin_templates_docs=self.webpackChunkz2k_plugin_templates_docs||[]).push([[6734],{6937:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"reference-manual/prompting/finalizing-and-miss-handling-for-z2k-templates","title":"Finalizing and Miss Handling for Z2K Templates","description":"A miss is when a Template Field exists in a template but does not have any data provided for it during an update action.","source":"@site/docs/reference-manual/prompting/finalizing-and-miss-handling-for-z2k-templates.md","sourceDirName":"reference-manual/prompting","slug":"/reference-manual/prompting/finalizing-and-miss-handling-for-z2k-templates","permalink":"/z2k-plugin-templates-docs/docs/reference-manual/prompting/finalizing-and-miss-handling-for-z2k-templates","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":68,"frontMatter":{"sidebar_position":68,"title":"Finalizing and Miss Handling for Z2K Templates","slug":"finalizing-and-miss-handling-for-z2k-templates"},"sidebar":"Reference Manual","previous":{"title":"Built-in Prompting Directives","permalink":"/z2k-plugin-templates-docs/docs/reference-manual/prompting/built-in-prompting-directives"},"next":{"title":"Handlebars Support","permalink":"/z2k-plugin-templates-docs/docs/reference-manual/handlebars-support/handlebars-support"}}');var t=i(4848),l=i(8453);const r={sidebar_position:68,title:"Finalizing and Miss Handling for Z2K Templates",slug:"finalizing-and-miss-handling-for-z2k-templates"},a="Override - Default Answer",d={},o=[];function c(e){const n={a:"a",code:"code",h1:"h1",header:"header",li:"li",ol:"ol",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"A miss is when a Template Field exists in a template but does not have any data provided for it during an update action."}),"\n",(0,t.jsx)(n.p,{children:"Miss Handling is different from Z2K than for classic Handlebars Field Replacement for a number of reasons:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Some cards are repeatedly being operated on, with not all data known at once (e.g. Log Files that are updated throughout the day)."}),"\n",(0,t.jsx)(n.li,{children:"Some cards will have data that is not known at creation (e.g. say, creating a card for a book, you will not know how you will rate it until you are finished)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"By default, if a field is not provided with data during a processing event, the field will remain in the file untouched. There are two ways this default handling can be overriden:"}),"\n",(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"override---default-answer",children:"Override - Default Answer"})}),"\n",(0,t.jsxs)(n.p,{children:["If a field specifies a ",(0,t.jsx)(n.a,{href:"/z2k-plugin-templates-docs/docs/reference-manual/prompting/prompting#%5EDefaultAnswer",children:"Default Answer"}),", then that is a signal that unspecified fields should be filled in with that Default Answer upon use of the template file."]}),"\n",(0,t.jsx)(n.h1,{id:"override---default-miss-handling",children:"Override - Default Miss Handling"}),"\n",(0,t.jsxs)(n.p,{children:["If a template file contains in its YAML code includes the key ",(0,t.jsx)(n.code,{children:"z2k_template_default_miss_handling"}),", it will use the method specified in the key's value:"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Key"}),(0,t.jsx)(n.th,{children:"Key Value"}),(0,t.jsx)(n.th,{children:"Miss Handling"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"z2k_template_default_miss_handling"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"preserve"})}),(0,t.jsx)(n.td,{children:"(default) If a miss occurs for a field, the field will be preserved as is in the resultant file."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"z2k_template_default_miss_handling"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"clear"})}),(0,t.jsx)(n.td,{children:"If a miss occurs for a field, it will clear the field from the resultant file."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:["See ",(0,t.jsx)(n.a,{href:"/z2k-plugin-templates-docs/docs/reference-manual/z2k-templates-and-yaml/z2k-template-yaml-configuration-fields",children:"Z2K Template YAML Configuration Fields"})," for more details."]}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{})]})]})]}),"\n",(0,t.jsx)(n.h1,{id:"override---clear-and-preserve-helper-functions",children:"Override - clear and preserve Helper functions"}),"\n",(0,t.jsxs)(n.p,{children:["If a field uses the ",(0,t.jsx)(n.a,{href:"/z2k-plugin-templates-docs/docs/reference-manual/built-in-helper-functions/built-in-helper-functions",children:"built-in helper functions"})," ",(0,t.jsx)(n.code,{children:"clear"})," or ",(0,t.jsx)(n.code,{children:"preserve"}),", it will override the default handling for that particular field, allowing for fine grain control of miss handling."]}),"\n",(0,t.jsx)(n.h1,{id:"implementation-notes",children:"Implementation Notes"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["This will require potentially a branched copy of handlebars/mustache.js. Or you can preprocess the data and add a custom helper around every field that will do the preservation step.","\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Tip: Use ",(0,t.jsx)(n.a,{href:"https://jsfiddle.net/76484/bpoezqga/",children:"https://jsfiddle.net/76484/bpoezqga/"})," to explore Handlebars implementation"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Other implementations that were considered:\n2. Airship implements a ",(0,t.jsx)(n.a,{href:"https://jsfiddle.net/76484/bpoezqga/",children:"$def helper"}),"\n3. You can also register a ",(0,t.jsx)(n.a,{href:"https://jsfiddle.net/76484/bpoezqga/",children:"helper"})," to re-output the field:"]}),"\n",(0,t.jsxs)(n.li,{children:["Need documentation on what to do if both the  ",(0,t.jsx)(n.code,{children:"clear"}),"  is used and a default value is used."]}),"\n"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Replacement Control Helpers:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"{{xx FieldName}}"})," - says clear the field if it is not present","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Property: If data for the field is not provided, do you a) leave the field intact, b) clear the field, c) insert the default answer"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"{{xd FieldName||Default Answer}}"})," - says to insert the field's Default Answer"]}),"\n",(0,t.jsx)(n.li,{children:"OR"}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"{{preserve FieldName}}"})," - says to preserve this field if no value is provided"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"{{noPrompt Fieldname}}"})," - says to never prompt the user for this field","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Property to say don't prompt the user for this field, just leave in the file? - Think Logs"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:'By default a variable "miss" returns an empty string. This can usually be configured in your Mustache library. The Ruby version of Mustache supports raising an exception in this situation, for instance.'}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://stackoverflow.com/questions/8978779/how-can-i-plug-a-strategy-to-deal-with-missing-attributes-when-using-mustache-te",children:"https://stackoverflow.com/questions/8978779/how-can-i-plug-a-strategy-to-deal-with-missing-attributes-when-using-mustache-te"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://stackoverflow.com/questions/17133367/finding-missing-variables-in-a-mustache-template",children:"https://stackoverflow.com/questions/17133367/finding-missing-variables-in-a-mustache-template"})}),"\n",(0,t.jsx)(n.p,{children:"This way you can handle empty values so you still get ProductVersion:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"Product Version={{#Version}}{{{Version}}}{{/Version}}{{^Version}}''{{/Version}}"})}),"\n",(0,t.jsxs)(n.p,{children:["Where ",(0,t.jsx)(n.code,{children:"{{^Version}}{{/Version}}"})," is called an inverted section and will be rendered if the value of that section's tag is null, undefined, false, falsy or an empty list. As it is explained in the doc."]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>a});var s=i(6540);const t={},l=s.createContext(t);function r(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);
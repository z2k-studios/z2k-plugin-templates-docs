"use strict";(globalThis.webpackChunkz2k_plugin_templates_docs=globalThis.webpackChunkz2k_plugin_templates_docs||[]).push([[2911],{2619:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>m,frontMatter:()=>a,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"reference-manual/template-files/template-file-structure","title":"Template File Structure","description":"Let\'s talk about the structure of a Template file. this needs serious editing","source":"@site/docs/reference-manual/template-files/template-file-structure.md","sourceDirName":"reference-manual/template-files","slug":"/reference-manual/template-files/template-file-structure","permalink":"/z2k-plugin-templates-docs/docs/reference-manual/template-files/template-file-structure","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":30,"frontMatter":{"sidebar_position":30,"doc_state":"initial_ai_draft","title":"Template File Structure","slug":"template-file-structure"},"sidebar":"Reference Manual","previous":{"title":"Template Requirements","permalink":"/z2k-plugin-templates-docs/docs/reference-manual/template-files/template-requirements"},"next":{"title":"Types of Template Files","permalink":"/z2k-plugin-templates-docs/docs/reference-manual/template-files/types-of-template-files"}}');var l=t(4848),s=t(8453);const a={sidebar_position:30,doc_state:"initial_ai_draft",title:"Template File Structure",slug:"template-file-structure"},r="Template File Structure",d={},o=[{value:"Markdown Format",id:"markdown-format",level:2},{value:"YAML Frontmatter",id:"yaml-frontmatter",level:2},{value:"Built-in and Custom Fields in YAML",id:"built-in-and-custom-fields-in-yaml",level:3},{value:"Relation to the Rendered File Title",id:"relation-to-the-rendered-file-title",level:3},{value:"Body Content",id:"body-content",level:2},{value:"System Blocks and Global Blocks",id:"system-blocks-and-global-blocks",level:3},{value:"Minimum Structure",id:"minimum-structure",level:2},{value:"Minimal Template",id:"minimal-template",level:3},{value:"Practical Minimal Template",id:"practical-minimal-template",level:3},{value:"Template with Fields in YAML",id:"template-with-fields-in-yaml",level:3},{value:"Field Discovery and Parsing",id:"field-discovery-and-parsing",level:2},{value:"Recommended Practices",id:"recommended-practices",level:2},{value:"Summary",id:"summary",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"template-file-structure",children:"Template File Structure"})}),"\n",(0,l.jsxs)(n.p,{children:["Let's talk about the structure of a Template file. ",(0,l.jsx)("span",{class:"z2k-mark",children:"this needs serious editing"})]}),"\n",(0,l.jsx)(n.h2,{id:"markdown-format",children:"Markdown Format"}),"\n",(0,l.jsxs)(n.p,{children:["Because the only strict requirement for a template file is that ",(0,l.jsx)(n.a,{href:"/docs/reference-manual/template-files/template-requirements#it-must-be-a-text-file",children:"it must be a text file"}),", preferably markdown based, the file structure consists of a text file stored in standard straight text."]}),"\n",(0,l.jsxs)(n.p,{children:["Like most Markdown formats, the template can optionally support ",(0,l.jsx)(n.a,{href:"/docs/reference-manual/z2k-templates-and-yaml/z2k-templates-and-yaml",children:"YAML frontmatter"})," to provide additional data and configuration for the file."]}),"\n",(0,l.jsx)(n.p,{children:"These follow the same rules as any Obsidian note. If you are unfamiliar with Obsidian frontmatter or Markdown structure, refer to Obsidian\u2019s official documentation:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Obsidian Frontmatter: ",(0,l.jsx)(n.a,{href:"https://help.obsidian.md/Editing+and+formatting/Metadata",children:"https://help.obsidian.md/Editing+and+formatting/Metadata"})]}),"\n",(0,l.jsxs)(n.li,{children:["Obsidian Markdown: ",(0,l.jsx)(n.a,{href:"https://help.obsidian.md/Editing+and+formatting/Basic+formatting+syntax",children:"https://help.obsidian.md/Editing+and+formatting/Basic+formatting+syntax"})]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"This page focuses on how Z2K Templates interprets these structures."}),"\n",(0,l.jsx)(n.h2,{id:"yaml-frontmatter",children:"YAML Frontmatter"}),"\n",(0,l.jsx)(n.p,{children:"YAML frontmatter appears at the top of the template file and is enclosed between triple-dashes:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-md",children:'---\nz2k_template_type: note\nz2k_template_name: Sample Template\ncustom_field: "{{myField}}"\n---\n'})}),"\n",(0,l.jsx)(n.p,{children:"Frontmatter may contain:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Z2K configuration fields"})," such as ",(0,l.jsx)(n.code,{children:"z2k_template_name"})," or ",(0,l.jsx)(n.code,{children:"z2k_template_default_miss_handling"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Field definitions"})," that include inline ",(0,l.jsx)(n.code,{children:"{{field-info}}"})," calls."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Static metadata"})," that should be copied directly to the final file."]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["The Z2K Template Engine parses frontmatter before body content. The presence of ",(0,l.jsx)(n.code,{children:"{{field-info}}"})," entries inside YAML is permitted but constrained by YAML syntax rules; these must be valid YAML values."]}),"\n",(0,l.jsx)(n.admonition,{title:"Partials cannot contain frontmatter. Only top-level template files and system blocks may include YAML sections.",type:"note"}),"\n",(0,l.jsx)(n.h3,{id:"built-in-and-custom-fields-in-yaml",children:"Built-in and Custom Fields in YAML"}),"\n",(0,l.jsxs)(n.p,{children:["Z2K Templates discovers field references inside YAML using its AST parser. This means that any variable written as ",(0,l.jsx)(n.code,{children:"{{someField}}"})," in frontmatter will create a field definition unless overridden or configured via a ",(0,l.jsx)(n.code,{children:"{{field-info}}"})," entry."]}),"\n",(0,l.jsxs)(n.p,{children:["When both body and frontmatter use the same field name, Z2K merges the definitions following the precedence rules described in ",(0,l.jsx)(n.a,{href:"/docs/reference-manual/built-in-fields/built-in-fields",children:"Built-In Fields"})," and ",(0,l.jsx)(n.a,{href:"/docs/reference-manual/prompting/prompting",children:"Prompting"}),"."]}),"\n",(0,l.jsx)(n.h3,{id:"relation-to-the-rendered-file-title",children:"Relation to the Rendered File Title"}),"\n",(0,l.jsxs)(n.p,{children:["Z2K normalizes certain field names such as ",(0,l.jsx)(n.code,{children:"{{noteTitle}}"})," and ",(0,l.jsx)(n.code,{children:"{{cardTitle}}"})," into a canonical field ",(0,l.jsx)(n.code,{children:"{{fileTitle}}"}),". This allows templates written before the alias change to continue functioning. The rendered file's title may be derived from:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"The filename generated by the command triggering the template."}),"\n",(0,l.jsxs)(n.li,{children:["A ",(0,l.jsx)(n.code,{children:"{{fileTitle}}"})," field resolved in YAML or body."]}),"\n",(0,l.jsxs)(n.li,{children:["A ",(0,l.jsx)(n.code,{children:"z2k_template_default_title"})," entry in YAML."]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Templates should explicitly specify title logic when necessary."}),"\n",(0,l.jsx)(n.h2,{id:"body-content",children:"Body Content"}),"\n",(0,l.jsx)(n.p,{children:"The body contains Markdown mixed with template expressions. Everything written in the body is copied to the final file after fields have been resolved."}),"\n",(0,l.jsx)(n.p,{children:"Example:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-md",children:"# Meeting Notes for {{date}}\n\nAttendees: {{attendees}}\n\n{{#if agenda}}\n## Agenda\n{{agenda}}\n{{/if}}\n"})}),"\n",(0,l.jsx)(n.p,{children:"The body allows:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Standard Markdown"}),"\n",(0,l.jsxs)(n.li,{children:["Field references: ",(0,l.jsx)(n.code,{children:"{{fieldName}}"})]}),"\n",(0,l.jsxs)(n.li,{children:["Helper functions: ",(0,l.jsx)(n.code,{children:"{{format-date date}}"})]}),"\n",(0,l.jsx)(n.li,{children:"Conditional and iterative Handlebars constructs"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["See ",(0,l.jsx)(n.a,{href:"/docs/reference-manual/template-fields/template-fields",children:"Template Fields"})," and ",(0,l.jsx)(n.a,{href:"/docs/reference-manual/helper-functions/helper-functions",children:"Helper Functions"})," for reference."]}),"\n",(0,l.jsx)(n.h3,{id:"system-blocks-and-global-blocks",children:"System Blocks and Global Blocks"}),"\n",(0,l.jsxs)(n.p,{children:["System Blocks and Global Blocks are mechanisms that prepend or inject content into your template before rendering. They are resolved ",(0,l.jsx)(n.strong,{children:"before"})," your main template content and can alter the YAML or body structure."]}),"\n",(0,l.jsx)(n.p,{children:"For example, a system block might inject standardized metadata:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-md",children:'---\nauthor: "{{userName}}"\n---\n'})}),"\n",(0,l.jsx)(n.p,{children:"Or prepend structured Markdown:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-md",children:"> This note was created using the Standard Meeting Template\n"})}),"\n",(0,l.jsxs)(n.p,{children:["These behaviors are described in detail under ",(0,l.jsx)(n.a,{href:"/docs/reference-manual/system-block-templates/system-block-templates",children:"System Block Templates"}),"."]}),"\n",(0,l.jsx)(n.h2,{id:"minimum-structure",children:"Minimum Structure"}),"\n",(0,l.jsxs)(n.p,{children:["A template file must contain ",(0,l.jsx)(n.strong,{children:"at least one"})," of the following:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"YAML frontmatter with metadata or fields"}),"\n",(0,l.jsx)(n.li,{children:"Body content with Markdown or fields"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"A template with no YAML and no fields is valid but not useful."}),"\n",(0,l.jsx)(n.p,{children:"Examples:"}),"\n",(0,l.jsx)(n.h3,{id:"minimal-template",children:"Minimal Template"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-md",children:"---\n---\nHello world\n"})}),"\n",(0,l.jsx)(n.h3,{id:"practical-minimal-template",children:"Practical Minimal Template"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-md",children:"---\nz2k_template_type: note\n---\n# {{fileTitle}}\nCreated on {{date}}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"template-with-fields-in-yaml",children:"Template with Fields in YAML"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-md",children:'---\nproject: "{{projectName}}"\nowner: "{{owner}}"\n---\n# Project Kickoff\nWelcome to {{projectName}}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"field-discovery-and-parsing",children:"Field Discovery and Parsing"}),"\n",(0,l.jsxs)(n.p,{children:["Z2K parses the template in several phases (see ",(0,l.jsx)(n.a,{href:"/docs/reference-manual/template-files/lifecycle-of-a-template/lifecycle-of-a-template",children:"Lifecycle of a Template"})," for full details):"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Extract YAML frontmatter."}),"\n",(0,l.jsx)(n.li,{children:"Extract system block frontmatter."}),"\n",(0,l.jsx)(n.li,{children:"Parse body."}),"\n",(0,l.jsx)(n.li,{children:"Determine all fields referenced."}),"\n",(0,l.jsx)(n.li,{children:"Merge field definitions from built-ins, system blocks, YAML, and body."}),"\n",(0,l.jsx)(n.li,{children:"Resolve missing fields via sequential prompting."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"This page focuses on the structural aspect\u2014how the template file is divided\u2014not the full lifecycle."}),"\n",(0,l.jsx)(n.h2,{id:"recommended-practices",children:"Recommended Practices"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Keep YAML simple; offload logic to body fields or helper functions."}),"\n",(0,l.jsxs)(n.li,{children:["Place default values and directives near their associated fields using ",(0,l.jsx)(n.code,{children:"{{field-info}}"}),"."]}),"\n",(0,l.jsx)(n.li,{children:"Avoid overusing fields inside YAML unless necessary for metadata."}),"\n",(0,l.jsxs)(n.li,{children:["Prefer explicit titles using ",(0,l.jsx)(n.code,{children:"{{fileTitle}}"}),"."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,l.jsx)(n.p,{children:"A template file is just Markdown with optional YAML, enriched with field syntax. Understanding this structure helps you reason about how templates are parsed, merged, and ultimately rendered by the Z2K Template Engine."}),"\n",(0,l.jsx)(n.admonition,{type:"danger",children:(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"This page assumes familiarity with YAML syntax; invalid YAML will cause template parsing errors."}),"\n",(0,l.jsx)(n.li,{children:"Partial templates cannot have frontmatter; only main templates and system/global blocks can define YAML."}),"\n",(0,l.jsxs)(n.li,{children:["System block prepending may affect line numbers during parsing; see ",(0,l.jsx)(n.a,{href:"/docs/reference-manual/system-block-templates/system-block-templates",children:"System Block Templates"})," for deeper details."]}),"\n"]})})]})}function m(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>r});var i=t(6540);const l={},s=i.createContext(l);function a(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);